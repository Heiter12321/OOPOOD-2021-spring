У меня есть несколько команд:

1) Запостить.

2) Лайкнуть.

3) Прокомментировать.

Запросы будут такие:

1) Получить все посты по заданному id.

2) Получить все комментарии под постом.

3) Получить количество лайков под постом или комментарием.


Так как запросов на чтение гораздо больше запросов на публикацию, надо оптимизировать чтение, чтобы запросы выполнялись побыстрее. 
Поэтому read-model реализована двумя классами: CommentDatabase и PostDatabase. 
Они внутри себя содержат HashMap, в которой значениями являются ArrayList<Post> или ArrayList<Comment>. 
При выполнении какой-либо команды туда добавляются новые элементы, а при выполнении запросов возвращаются эти списки.

Команды устроены так: в конструкторе принимают Database, ключ, по которому надо положить элемент в Database и сам элемент.
При выполнении метода execute команда кладет элемент в базу.

Запросы устроены так: в конструкторе принимают Database и элемент, по которому надо сделать выборку.
При выполнении метода select возвращаются результаты.
